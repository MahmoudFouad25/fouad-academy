<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة الفؤاد التعليمية - الرئيسية</title>
    <link rel="stylesheet" href="shared/css/main.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>جاري تحميل منصة الفؤاد التعليمية...</p>
    </div>

    <!-- Navigation Bar -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="shared/images/logo.png" alt="شعار المنصة" class="logo">
                <h1>منصة الفؤاد التعليمية</h1>
            </div>
            
            <div class="nav-menu">
                <a href="#home" class="nav-link active">الرئيسية</a>
                <a href="#courses" class="nav-link">الدورات</a>
                <a href="#about" class="nav-link">من نحن</a>
                <a href="#contact" class="nav-link">تواصل معنا</a>
            </div>
            
            <div class="nav-auth">
                <button class="btn btn-outline" onclick="showLogin()">تسجيل الدخول</button>
                <button class="btn btn-primary" onclick="showRegister()">انضم الآن</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-container">
            <div class="hero-content">
                <h2 class="hero-title">استيقظ، اكتشف، انطلق</h2>
                <p class="hero-subtitle">رحلة حقيقية للقلوب التعبانة... دليل عملي للي نفسهم يرجعوا لنفسهم بجد</p>
                <div class="hero-buttons">
                    <button class="btn btn-hero" onclick="showRegister()">ابدأ رحلتك التعليمية</button>
                    <button class="btn btn-outline-light" onclick="scrollToSection('courses')">تصفح الدورات</button>
                </div>
            </div>
            <div class="hero-image">
                <div class="floating-elements">
                    <span class="floating-icon">📚</span>
                    <span class="floating-icon">🌟</span>
                    <span class="floating-icon">🎯</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Courses Section -->
    <section id="courses" class="courses-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">دوراتنا التدريبية</h2>
                <p class="section-subtitle">اكتشف مجموعة متنوعة من الدورات المصممة لتطوير ذاتك ومهاراتك</p>
            </div>
            
            <div class="courses-grid" id="coursesGrid">
                <!-- الدورات ستُحمّل هنا ديناميكياً -->
            </div>
            
            <div class="text-center">
                <button class="btn btn-primary" onclick="showAllCourses()">عرض جميع الدورات</button>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <div class="about-grid">
                <div class="about-content">
                    <h2 class="section-title">عن الأستاذ محمود فؤاد</h2>
                    <p class="about-text">
                        خبير في التطوير الذاتي والنمو الشخصي، مؤسس منهج "ملاذ الحيارى" 
                        ومطور برامج تدريبية متخصصة في إعادة اكتشاف الذات والتوازن النفسي.
                    </p>
                    <div class="about-stats">
                        <div class="stat-item">
                            <span class="stat-number" data-count="1000">0</span>
                            <span class="stat-label">متدرب</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" data-count="50">0</span>
                            <span class="stat-label">دورة تدريبية</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" data-count="5">0</span>
                            <span class="stat-label">سنوات خبرة</span>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="shared/images/instructor.jpg" alt="الأستاذ محمود فؤاد" class="instructor-image">
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">تواصل معنا</h2>
                <p class="section-subtitle">نحن هنا لمساعدتك في رحلتك التعليمية</p>
            </div>
            
            <div class="contact-grid">
                <div class="contact-info">
                    <div class="contact-item">
                        <span class="contact-icon">📧</span>
                        <div>
                            <h3>البريد الإلكتروني</h3>
                            <p>coach.mahmoud.fouad@gmail.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon">📱</span>
                        <div>
                            <h3>واتساب</h3>
                            <p>للاستفسارات والدعم الفني</p>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <form id="contactForm">
                        <div class="form-group">
                            <input type="text" id="contactName" placeholder="الاسم الكامل" required>
                        </div>
                        <div class="form-group">
                            <input type="email" id="contactEmail" placeholder="البريد الإلكتروني" required>
                        </div>
                        <div class="form-group">
                            <textarea id="contactMessage" placeholder="رسالتك" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">إرسال الرسالة</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>منصة الفؤاد التعليمية</h3>
                    <p>منصة تعليمية متخصصة في التطوير الذاتي وإعادة اكتشاف الذات</p>
                </div>
                <div class="footer-section">
                    <h3>روابط سريعة</h3>
                    <ul>
                        <li><a href="#home">الرئيسية</a></li>
                        <li><a href="#courses">الدورات</a></li>
                        <li><a href="#about">من نحن</a></li>
                        <li><a href="#contact">تواصل معنا</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>تابعنا</h3>
                    <div class="social-links">
                        <a href="#" class="social-link">📘</a>
                        <a href="#" class="social-link">📱</a>
                        <a href="#" class="social-link">📧</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 منصة الفؤاد التعليمية. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <!-- Auth Modals -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeAuthModal()">&times;</span>
            
            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h2>تسجيل الدخول</h2>
                <form id="loginFormElement">
                    <div class="form-group">
                        <input type="email" id="loginEmail" placeholder="البريد الإلكتروني" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="كلمة المرور" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">دخول</button>
                </form>
                <p class="auth-switch">ليس لديك حساب؟ <a href="#" onclick="switchToRegister()">أنشئ حساباً جديداً</a></p>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" class="auth-form hidden">
                <h2>إنشاء حساب جديد</h2>
                <form id="registerFormElement">
                    <div class="form-group">
                        <input type="text" id="registerName" placeholder="الاسم الكامل" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="registerEmail" placeholder="البريد الإلكتروني" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="registerPassword" placeholder="كلمة المرور" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="registerConfirmPassword" placeholder="تأكيد كلمة المرور" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">إنشاء الحساب</button>
                </form>
                <p class="auth-switch">لديك حساب بالفعل؟ <a href="#" onclick="switchToLogin()">سجل دخولك</a></p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="shared/js/main.js"></script>
    <script src="shared/js/auth.js"></script>
<!-- أضف هذا الكود في نهاية ملف index.html قبل إغلاق </body> -->

<!-- Firebase Configuration and Initialization -->
<script type="module">
    // Import Firebase modules
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { 
        getAuth, 
        signInWithPopup, 
        GoogleAuthProvider, 
        signOut, 
        onAuthStateChanged,
        signInWithEmailAndPassword,
        createUserWithEmailAndPassword,
        updateProfile
    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { 
        getFirestore, 
        doc, 
        setDoc, 
        getDoc, 
        updateDoc,
        collection,
        getDocs,
        query,
        where,
        orderBy,
        addDoc,
        deleteDoc
    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    import { 
        getStorage, 
        ref, 
        uploadBytes, 
        getDownloadURL 
    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBAcPzPzIDYHvezf5klAwFzU0gmoo_AsCo",
        authDomain: "fouad-academy.firebaseapp.com",
        projectId: "fouad-academy",
        storageBucket: "fouad-academy.firebasestorage.app",
        messagingSenderId: "553738647199",
        appId: "1:553738647199:web:4e73c59b115da5be15d4aa",
        measurementId: "G-M0VML1SRZ4"
    };

    // Initialize Firebase
    let app, auth, db, storage;
    
    try {
        app = initializeApp(firebaseConfig);
        auth = getAuth(app);
        db = getFirestore(app);
        storage = getStorage(app);
        
        // تصدير Firebase للنطاق العام
        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.firebaseStorage = storage;
        
        // تصدير الوظائف للاستخدام في auth.js
        window.firebaseAuthFunctions = {
            signInWithPopup,
            GoogleAuthProvider,
            signOut,
            onAuthStateChanged,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            updateProfile
        };
        
        window.firebaseFirestoreFunctions = {
            doc,
            setDoc,
            getDoc,
            updateDoc,
            collection,
            getDocs,
            query,
            where,
            orderBy,
            addDoc,
            deleteDoc
        };
        
        window.firebaseStorageFunctions = {
            ref,
            uploadBytes,
            getDownloadURL
        };
        
        console.log('🔥 Firebase تم تحميله وتهيئته بنجاح!');
        
        // إشعار المستخدم بنجاح التحميل
        setTimeout(() => {
            const indicator = document.createElement('div');
            indicator.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                background: #10b981;
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 8px;
                font-size: 0.8rem;
                z-index: 9999;
                animation: fadeInOut 3s ease;
            `;
            indicator.textContent = '🔥 Firebase متصل';
            
            const fadeAnimation = document.createElement('style');
            fadeAnimation.textContent = `
                @keyframes fadeInOut {
                    0%, 100% { opacity: 0; }
                    20%, 80% { opacity: 1; }
                }
            `;
            document.head.appendChild(fadeAnimation);
            document.body.appendChild(indicator);
            
            setTimeout(() => indicator.remove(), 3000);
        }, 1000);
        
    } catch (error) {
        console.error('❌ خطأ في تحميل Firebase:', error);
        
        // إشعار بفشل Firebase
        setTimeout(() => {
            const errorIndicator = document.createElement('div');
            errorIndicator.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                background: #ef4444;
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 8px;
                font-size: 0.8rem;
                z-index: 9999;
            `;
            errorIndicator.textContent = '⚠️ Firebase غير متصل';
            document.body.appendChild(errorIndicator);
            
            setTimeout(() => errorIndicator.remove(), 5000);
        }, 1000);
    }
    
    // مراقبة حالة الاتصال
    window.addEventListener('online', () => {
        console.log('🌐 تم استعادة الاتصال بالإنترنت');
    });
    
    window.addEventListener('offline', () => {
        console.log('📡 فقدان الاتصال بالإنترنت');
    });

</script>

<!-- تحميل ملفات JavaScript بالترتيب الصحيح -->
<script src="shared/js/main.js"></script>
<script src="shared/js/auth.js"></script>

<!-- إضافة معالج لضمان تحميل auth.js بعد Firebase -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // التأكد من تحميل Firebase قبل تشغيل auth.js
    function checkFirebaseReady() {
        if (window.firebaseApp && window.firebaseAuth && window.firebaseDb) {
            console.log('✅ Firebase جاهز - تشغيل نظام المصادقة');
            
            // إعادة تهيئة نظام المصادقة إذا لزم الأمر
            if (window.fouadAuth && typeof window.fouadAuth.init === 'function') {
                // النظام محمل بالفعل
                console.log('🔄 نظام المصادقة محمل ومجهز');
            }
        } else {
            console.log('⏳ انتظار تحميل Firebase...');
            setTimeout(checkFirebaseReady, 100);
        }
    }
    
    // بدء فحص Firebase
    setTimeout(checkFirebaseReady, 500);
    
    // إضافة معالج للأخطاء العامة
    window.addEventListener('error', function(event) {
        console.error('خطأ في التطبيق:', event.error);
    });
    
    // معالج للوعود المرفوضة
    window.addEventListener('unhandledrejection', function(event) {
        console.error('وعد مرفوض:', event.reason);
    });
});
</script>
</body>
</html>
